<ns0:SequentialWorkflow x:Name="SequentialWorkflow" ActorId="00000000-0000-0000-0000-000000000000" WorkflowDefinitionId="00000000-0000-0000-0000-000000000000" RequestId="00000000-0000-0000-0000-000000000000" TargetId="00000000-0000-0000-0000-000000000000" xmlns:ns1="clr-namespace:UFIM.CustomActivities;Assembly=UFIM.LookupPropertiesActivity, Version=1.0.0.0, Culture=neutral, PublicKeyToken=77071b69c28b13cd" xmlns:ns2="clr-namespace:UFIM.CustomActivities;Assembly=UFIM.UpdateResourceActivity, Version=1.0.0.0, Culture=neutral, PublicKeyToken=77071b69c28b13cd" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/workflow" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:ns0="clr-namespace:Microsoft.ResourceManagement.Workflow.Activities;Assembly=Microsoft.ResourceManagement, Version=4.0.3617.2, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
	<ns0:FunctionActivity x:Name="authenticationGateActivity3" FunctionExpression="&lt;fn id=&quot;SingleValueAssignment&quot;  isCustomExpression=&quot;false&quot;&gt;&lt;arg&gt;&quot;NULL&quot;&lt;/arg&gt;&lt;/fn&gt;" Description="initialise roles" Destination="[//WorkflowData/roles]" />
	<ns1:LookupPropertiesActivity ResolverWorkflowDataKey="{x:Null}" ResolvedXpathFilter="{x:Null}" LogFile="F:\LOGS\FIM\CSO.RecalculateUserRolesOnDelete.log" XPathFilter="/csoRole[&#xD;&#xA;&#x9;(ObjectID=/csoEntitlement[&#xD;&#xA;&#x9;&#x9;UserID='[//Target/UserID]' &#xD;&#xA;&#x9;&#x9;and (idmStartDate &lt; op:add-dayTimeDuration-to-dateTime(fn:current-dateTime(), xs:dayTimeDuration('P1D'))) &#xD;&#xA;&#x9;&#x9;and ((idmEndDate &gt; op:add-dayTimeDuration-to-dateTime(fn:current-dateTime(), xs:dayTimeDuration('P1D'))))&#xD;&#xA;&#x9;]/csoRoles/csoRollUpRole) &#xD;&#xA;&#x9;or (ObjectID=/csoEntitlement[&#xD;&#xA;&#x9;&#x9;UserID='[//Target/UserID]'&#xD;&#xA;&#x9;&#x9;and (idmStartDate &lt; op:add-dayTimeDuration-to-dateTime(fn:current-dateTime(), xs:dayTimeDuration('P1D'))) &#xD;&#xA;&#x9;&#x9;and ((idmEndDate &gt; op:add-dayTimeDuration-to-dateTime(fn:current-dateTime(), xs:dayTimeDuration('P1D'))))&#xD;&#xA;&#x9;]/csoRoles)&#xD;&#xA;]&#xD;&#xA;" OverwriteLogFile="True" LogMode="minimal" x:Name="authenticationGateActivity1" SaveWorkflowDataStorageMode="Object" CurrentRequest="{x:Null}" AttributeNames="ObjectID=roles" />
	<ns2:UpdateResourceFromWorkflowData LogFile="F:\LOGS\FIM\CSO.RecalculateUserRolesOnDelete.log" ObjectType="Person" TargetResource="{x:Null}" ResolvedExtraAttributesExpression="" ResolvedQuery="{x:Null}" InsertIfNotFound="False" ResolvedDisplayName="" DisplayName="[//Target/UserID/DisplayName]" CurrentRequest="{x:Null}" NumChangesPending="0" LogMode="minimal" ExtraAttributes="csoRoles=guid[]:[//WorkflowData/roles]" DeleteIfFound="False" SaveWorkflowDataStorageMode="Object" x:Name="authenticationGateActivity2" ResourceQuery="/Person[ObjectID='[//Target/UserID]']" OverwriteLogFile="False" />
	<ns2:UpdateResourceFromWorkflowData LogFile="F:\LOGS\FIM\CSO.RecalculateUserRolesOnDelete.log" ObjectType="csoEntitlement" TargetResource="{x:Null}" ResolvedExtraAttributesExpression="" ResolvedQuery="{x:Null}" InsertIfNotFound="False" ResolvedDisplayName="" DisplayName="[//Target/DisplayName]" CurrentRequest="{x:Null}" NumChangesPending="0" LogMode="minimal" ExtraAttributes="" DeleteIfFound="True" SaveWorkflowDataStorageMode="Object" x:Name="authenticationGateActivity4" ResourceQuery="/csoEntitlement[ObjectID='[//Target/ObjectID]']" OverwriteLogFile="False" />
</ns0:SequentialWorkflow>
